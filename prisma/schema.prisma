generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model Product {
  id          Int         @id @default(autoincrement())
  slug        String      @unique
  name        String
  brand       String
  description String
  price       Int
  mrp         Int
  tags        String      // comma-separated tags
  sizes       String      // comma-separated sizes
  glowLevel   Int
  image       String      // primary image path
  gallery     String?     // comma-separated extra image paths
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  orderItems  OrderItem[]
}

model Order {
  id                 Int         @id @default(autoincrement())
  orderNumber        String      @unique
  customerName       String
  customerEmail      String
  customerPhone      String
  shippingAddress    String
  city               String
  state              String
  pincode            String
  items              OrderItem[]
  subtotal           Int
  shipping           Int         @default(0)
  total              Int
  paymentMethod      String      // "razorpay", "cod", etc.
  paymentStatus      String      @default("pending") // "pending", "paid", "failed"
  razorpayOrderId    String?     // Razorpay order ID
  razorpayPaymentId  String?     // Razorpay payment ID
  orderStatus        String      @default("pending") // "pending", "processing", "shipped", "delivered", "cancelled"
  notes              String?
  createdAt          DateTime    @default(now())
  updatedAt          DateTime    @updatedAt
}

model OrderItem {
  id        Int      @id @default(autoincrement())
  orderId   Int
  productId Int
  name      String   // Store product name at time of order
  size      String
  quantity  Int
  price     Int      // Store price at time of order
  order     Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)
  product   Product  @relation(fields: [productId], references: [id])
  createdAt DateTime @default(now())
}

model Admin {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String   // hashed password
  name      String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
